(this.webpackJsonpuserdetailtracer=this.webpackJsonpuserdetailtracer||[]).push([[0],{140:function(e,t,a){e.exports=a(179)},145:function(e,t,a){},179:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),o=a.n(l),i=(a(145),a(56),a(208)),c=a(9),s=a(25),m=a(18),u=a(12),d=a(19),p=a(20),f=a(22),h=a(21),g=a(51),v=a.n(g),E=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}("csrftoken"),b=v.a.create({baseURL:"".concat("https://kilnapps.herokuapp.com","/api"),headers:{"content-type":"application/json","X-CSRFToken":E,Authorization:"Token ".concat(JSON.parse(localStorage.getItem("item")))}}),y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a?(console.log("installing"),a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}):console.log("null")}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var S=r.a.createContext(),I=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={workersInfo:[],sortedWorkersInfo:[],singleWorkerInfo:"",editWorkerInfoId:"",kilnInfo:[],sortedkilnInfo:[],kname:"All",gender:"All",searchbyworkername:"",searchbycode:"",searchbycountry:"",searchbydistrict:"All",searchbymunicipality:"All",searchbyward:"",searchbyworkercategory:"All",searchbynaike_f_name:"",searchbykilnname:"",searchbypaidstatus:"All",mobileNav:!1,searchbykiln:"",searchbykilnowner:"",ModalData:null,alertData:null,csrftoken:"",user:null,offlineWorkers:{},moneypaidworker:"All",moneypaidkiln:"All",InitialDataStatus:!1,csvData:[],csvKilnData:[],ngos:[],syncing:!1,searchbyngo:"All",pageRefreshed:(new Date).getTime()},e.supportServiceWorker=function(){return"serviceWorker"in navigator},e.isOnline=function(){return navigator.onLine},e.refreshCache=function(){localStorage.removeItem("app-data"),window.location.href=""},e.syncPayments=function(){e.setState({syncing:!0}),b({method:"POST",url:"sync-payments/",data:Object.values(e.state.offlineWorkers)}).then((function(t){200===t.status&&"OK"===t.statusText&&(e.hookState({offlineWorkers:{}}),e.setState({syncing:!1}))})).catch((function(t){console.log(t),e.setState({syncing:!1})}))},e.cancelPayment=function(t){t.extra=null,b({method:"PUT",url:"workers/".concat(t.id),data:t}).then((function(a){200===a.status&&"OK"===a.statusText&&e.WorkerEditStatefunc(t)})).catch((function(t){e.setState({})}))},e.fetchFreshData=function(){Promise.all([b.get("workers"),b.get("kiln"),b.get("user"),b.get("ngos")]).then((function(t){var a=Object(u.a)(t,4),n=a[0],r=a[1],l=a[2],o=a[3];e.hookState({workersInfo:n.data,sortedWorkersInfo:n.data,kilnInfo:r.data,sortedkilnInfo:r.data,user:l.data,InitialDataStatus:!0,ngos:o.data})})).catch((function(e){return console.log(e)}))},e.setFreshDataToState=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({workersInfo:t.workersInfo,sortedWorkersInfo:t.workersInfo,kilnInfo:t.kilnInfo,sortedkilnInfo:t.kilnInfo,offlineWorkers:t.offlineWorkers,user:t.user,ngos:t.ngos,InitialDataStatus:!0},a)},e.fetchAllData=function(){if(localStorage.getItem("app-data")){var t=JSON.parse(localStorage.getItem("app-data"));t.workersInfo.length&&t.kilnInfo.length&&t.user&&t.ngos.length?e.isOnline()&&Object.keys(t.offlineWorkers).length?e.setFreshDataToState(t,e.syncPayments):e.isOnline()&&((new Date).getTime()-t.pageRefreshed)/1e3>1800?e.fetchFreshData():e.setFreshDataToState(t):(localStorage.removeItem("app-data"),window.location.href="")}else e.fetchFreshData()},e.hookState=function(t,a){e.setState(t,a);var n=e.state,r=n.workersInfo,l=n.kilnInfo,o=n.user,i=n.offlineWorkers,c=n.ngos,s=n.pageRefreshed;localStorage.setItem("app-data",JSON.stringify({pageRefreshed:s,workersInfo:r,kilnInfo:l,user:o,offlineWorkers:i,ngos:c}))},e.KilnNewStatefunc=function(t){e.hookState({sortedkilnInfo:t,kilnInfo:t})},e.WorkerNewStatefunc=function(t){e.hookState({workersInfo:t,sortedWorkersInfo:t})},e.WorkerEditStatefunc=function(t){var a=e.state.workersInfo,n=a.findIndex((function(e){return e.id===t.id}));n>-1&&(a.splice(n,1,t),e.hookState({workersInfo:a,sortedWorkersInfo:a}))},e.WorkerEditPaymentFunc=function(t){e.state.offlineWorkers[t.id]=t,e.hookState({offlineWorkers:e.state.offlineWorkers})},e.ChangeOptionFilter=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(m.a)({},n,a),(function(){e.filterAllOptions(),e.filterKilnData()}))},e.filterAllOptions=function(){var t=e.state,a=t.kname,n=t.workersInfo,r=t.gender,l=t.searchbyworkername,o=t.searchbydistrict,i=t.searchbymunicipality,c=t.searchbyworkercategory,m=t.searchbynaike_f_name,u=t.searchbycode,d=t.searchbypaidstatus,p=t.searchbyngo,f=Object(s.a)(n);if(""!==l){var h=l.toLowerCase();f=f.filter((function(e){return e.f_name.toLowerCase().includes(h)}))}if(""!==u){var g=u.toLowerCase();f=f.filter((function(e){return e.code.toLowerCase().includes(g)}))}if(""!==m){var v=m.toLowerCase();f=f.filter((function(e){return e.naike_name&&e.naike_name.toLowerCase().includes(v)}))}if("All"!==r){var E=r.toLowerCase();f=f.filter((function(e){return e.gender&&e.gender.toLowerCase().startsWith(E)}))}if("All"!==o){var b=o.toLowerCase();f=f.filter((function(e){return e.district.toLowerCase().includes(b)}))}if("All"!==i){var y=i.toLowerCase();f=f.filter((function(e){return e.municipality&&e.municipality.toLowerCase().includes(y)}))}if("All"!==c){var k=c.toLowerCase();f=f.filter((function(e){return e.category&&e.category.toLowerCase().includes(k)}))}if("All"!==a){var S=a.toLowerCase();f=f.filter((function(e){return e.kiln.name.toLowerCase()===S}))}if(f="paid"==d?f.filter((function(e){return e.extra&&(e.extra.payment||e.extra.payment.amount>0)})):"unpaid"==d?f.filter((function(e){return null==e.extra})):f,"All"!==p){var I=p.toLowerCase();f=f.filter((function(e){return e.extra&&e.extra.payment&&e.extra.payment.amountpayer.ngo.name.toLowerCase().includes(I)}))}e.hookState({sortedWorkersInfo:f},(function(){e.CsvWorkerDataFunc()}))},e.filterKilnData=function(){var t=e.state,a=t.kilnInfo,n=t.searchbykiln,r=Object(s.a)(a);if(""!==n){var l=n.toLowerCase();r=r.filter((function(e){return e.name.toLowerCase().includes(l)}))}e.hookState({sortedkilnInfo:r},(function(){return e.CsvKilnDataFunc()}))},e.ReduceKeyValFunc=function(e){for(var t={},a=function(){var e=Object(u.a)(r[n],2);l=e[0];var a=(o=e[1]).reduce((function(e,t){return null!==t.extra?e+=parseInt(t.extra.amount):e}),0);i=o.reduce((function(e,t){return e[l]={peoplecount:o.length,totalamount:a},e}),{}),t=Object(c.a)(Object(c.a)({},t),i)},n=0,r=Object.entries(e);n<r.length;n++){var l,o,i;a()}return t},e.clone=function(e){return JSON.parse(JSON.stringify(e))},e.CsvWorkerDataFunc=function(){var t=e.state.sortedWorkersInfo,a=e.clone(t).map((function(e){return e.kilnname=e.kiln.name,e.kilnaddress=e.kiln.address,null!==e.extra&&(e.amountpaid=e.extra.payment.amount,e.amountpayer=e.extra.payment.amountpayer.username,e.amountpaiddate=e.extra.payment.timeofpay),null!==e.children&&(e.children=e.children.map((function(e){return e.join("/")})).join(",")),delete e.kiln,e}));e.setState({csvData:a})},e.CsvKilnDataFunc=function(){var t=e.state.sortedkilnInfo,a=e.clone(t).map((function(e){return e}));e.setState({csvKilnData:a})},e.OpenNavMenu=function(){e.hookState({mobileNav:!0})},e.CloseNavMenu=function(){e.hookState({mobileNav:!1})},e.filterById=function(e,t){return t.filter((function(t){return t.id!==e}))},e.deleteWorker=function(t){b({method:"DELETE",url:"workers/".concat(t)}).then((function(a){if(204===a.status&&"No Content"===a.statusText){e.hookState({alertData:{type:"success",msg:"Worker deleted successfully"}});var n=e.filterById(t,e.state.workersInfo);e.hookState({workersInfo:n,sortedWorkersInfo:n,searchbyworkername:"",gender:"All",searchbydistrict:"All",searchbymunicipality:"All",searchbyworkercategory:"All",searchbynaike_f_name:"",searchbykilnname:""})}})).catch((function(t){e.hookState({alertData:{type:"error",msg:"Something went wrong. Please try again."}})}))},e.deleteKiln=function(t){b({method:"DELETE",url:"kiln/".concat(t)}).then((function(a){if(204===a.status&&"No Content"===a.statusText){e.hookState({alertData:{type:"success",msg:"Kiln deleted successfully"}});var n=e.filterById(t,e.state.kilnInfo);e.hookState({kilnInfo:n,sortedkilnInfo:n,searchbykiln:""})}})).catch((function(t){e.hookState({alertData:{type:"error",msg:"Something went wrong. Please try again."}})}))},e.isSuperUser=function(){return navigator.onLine&&e.state.user&&e.state.user.is_superuser},e.isSuperUserSummary=function(){return e.state.user&&e.state.user.is_superuser},e.OpenModal=function(t){e.setState({ModalStatus:!0,ModalData:t})},e.CloseModal=function(t){e.hookState({ModalData:null}),e.filterAllOptions()},e.AlertFunc=function(t){e.hookState({alertData:t})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchAllData()}},{key:"render",value:function(){return r.a.createElement(S.Provider,{value:Object(c.a)(Object(c.a)({},this.state),{},{ChangeOptionFilter:this.ChangeOptionFilter,SearchWorkerName:this.SearchWorkerName,EditWorker:this.EditWorker,OpenNavMenu:this.OpenNavMenu,CloseNavMenu:this.CloseNavMenu,deleteWorker:this.deleteWorker,deleteKiln:this.deleteKiln,fetchAllData:this.fetchAllData,KilnNewStatefunc:this.KilnNewStatefunc,WorkerNewStatefunc:this.WorkerNewStatefunc,WorkerEditStatefunc:this.WorkerEditStatefunc,OpenModal:this.OpenModal,CloseModal:this.CloseModal,AlertFunc:this.AlertFunc,isSuperUser:this.isSuperUser,WorkerEditPaymentFunc:this.WorkerEditPaymentFunc,CsvWorkerDataFunc:this.CsvWorkerDataFunc,CsvKilnDataFunc:this.CsvKilnDataFunc,cancelPayment:this.cancelPayment,filterAllOptions:this.filterAllOptions,isSuperUserSummary:this.isSuperUserSummary,isOnline:this.isOnline,refreshCache:this.refreshCache,supportServiceWorker:this.supportServiceWorker})},this.props.children)}}]),a}(n.Component),w=(S.Consumer,a(109)),x=function(){var e=Object(n.useContext)(S),t=e.csvData,a=e.CsvWorkerDataFunc;console.log(t),Object(n.useEffect)((function(){a()}),[]);return r.a.createElement("div",{className:"csvBtn"},r.a.createElement(w.CSVLink,{filename:"kiln-workers.csv",data:t,headers:[{label:"First Name",key:"f_name"},{label:"Last Name",key:"l_name"},{label:"Naike",key:"naike_name"},{label:"NaikePhone",key:"naike_phone"},{label:"Priority",key:"priority"},{label:"Ngo",key:"org"},{label:"Duplicate",key:"duplicate"},{label:"Gender",key:"gender"},{label:"Age",key:"age"},{label:"Country",key:"country"},{label:"District",key:"district"},{label:"Municipality",key:"municipality"},{label:"Ward",key:"ward"},{label:"Category",key:"category"},{label:"Kiln Id",key:"kiln_id"},{label:"Children",key:"children"},{label:"Kiln",key:"kilnname"},{label:"Kiln Address",key:"kilnaddress"},{label:"Amount Paid",key:"amountpaid"},{label:"Amount Payer",key:"amountpayer"},{label:"Amount Paid Date",key:"amountpaiddate"},{label:"Code",key:"code"}]},r.a.createElement(i.a,{variant:"contained",color:"secondary"},"Export CSV")))},C=a(13),O=function(){return r.a.createElement("div",null,r.a.createElement(C.a,{to:{pathname:"workers"}}))},N=a(210),W=a(225),j=a(228),A=a(211),L=a(212),D=a(229),P=a(180),T=a(69),_=a.n(T),M=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={userInfo:{username:"",first_name:"",last_name:"",email:"",password:""},alertInfo:e.context.alertData},e.InputHandle=function(t){var a=t.target.value,n=t.target.name;e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(m.a)({},n,a))}))},e.login=function(t){t.preventDefault(),v()({method:"POST",headers:{"X-CSRFToken":E},url:"".concat("https://kilnapps.herokuapp.com","/auth/"),data:e.state}).then((function(t){localStorage.setItem("item",JSON.stringify(t.data.token)),e.setState({}),window.location.href=""})).catch((function(t){return e.setState({alertInfo:{type:"error",msg:"Something went wrong. Please try again."}})}))},e.isAuthenticated=function(){var e=localStorage.getItem("item");return e&&e.length>10},e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.alertInfo!==this.state.alertInfo&&this.context.AlertFunc(this.state.alertInfo)}},{key:"render",value:function(){var e=this.isAuthenticated(),t=this.props.classes;return r.a.createElement("div",null,e?r.a.createElement(C.a,{to:{pathname:"workers"}}):r.a.createElement(N.a,{maxWidth:"sm",component:"main"},r.a.createElement(W.a,{component:"div",mt:10},r.a.createElement("div",{className:t.paper},r.a.createElement(W.a,{component:"div",my:1},r.a.createElement(j.a,{className:t.avatar},r.a.createElement(_.a,null))),r.a.createElement(W.a,{component:"div",mb:2},r.a.createElement(A.a,{component:"h1",variant:"h5"},"Login")),r.a.createElement("form",{className:t.form,onSubmit:this.login},r.a.createElement(L.a,{container:!0,spacing:2},r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(D.a,{autoComplete:"username",variant:"outlined",required:!0,fullWidth:!0,name:"username",value:this.state.username,onChange:this.InputHandle,id:"userName",label:"User Name",autoFocus:!0})),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"outlined",required:!0,fullWidth:!0,value:this.state.password,onChange:this.InputHandle,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(W.a,{component:"div",my:3},r.a.createElement(i.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Login")))))))}}]),a}(r.a.Component);M.contextType=S;var F=Object(P.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{backgroundColor:"#3f51b5"},form:{width:"100%"},submit:{}}}))(M),H=a(8),K=function(){return localStorage.removeItem("item"),localStorage.removeItem("app-data"),r.a.createElement("div",{className:"logoutSection"},r.a.createElement("div",{className:"logoutIn"},r.a.createElement("h2",null,"You have been successfully logged out."),r.a.createElement(W.a,{component:"div",mb:2}),r.a.createElement(H.b,{to:"login"},r.a.createElement(i.a,{variant:"contained",color:"primary"},"Login Again"))))},U=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={userInfo:{username:"",first_name:"",last_name:"",email:"",password:"",ngo:window.location.toString().split("ngo=")[1]},alertInfo:e.context.alertData},e.register=function(t){t.preventDefault(),v()({method:"POST",headers:{"X-CSRFToken":E},url:"".concat("https://kilnapps.herokuapp.com","/api/users/"),data:e.state.userInfo}).then((function(t){201===t.status&&"Created"===t.statusText&&(e.setState({alertInfo:{type:"success",msg:"Worker Registered Successfully."}}),e.setState((function(t){return{prevState:t,userInfo:e.state.userInfo}})),window.location.href="/#/login")})).catch((function(t){e.setState({alertInfo:{type:"error",msg:"Something went wrong. Please try again."}})}))},e.InputHandle=function(t){var a=t.target.value,n=t.target.name,r=e.state.userInfo;e.setState({userInfo:Object(c.a)(Object(c.a)({},r),{},Object(m.a)({},n,a))})},e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.alertInfo!==this.state.alertInfo&&this.context.AlertFunc(this.state.alertInfo)}},{key:"render",value:function(){var e=this.props.classes;return this.state.userInfo.ngo?r.a.createElement("div",null,r.a.createElement(N.a,{maxWidth:"sm",component:"main"},r.a.createElement(W.a,{component:"div",mt:5},r.a.createElement("div",{className:e.paper},r.a.createElement(W.a,{component:"div",my:1},r.a.createElement(j.a,{className:e.avatar},r.a.createElement(_.a,null))),r.a.createElement(W.a,{component:"div",mb:2},r.a.createElement(A.a,{component:"h1",variant:"h5"},"Register")),r.a.createElement("form",{className:e.form,onSubmit:this.register},r.a.createElement(L.a,{container:!0,spacing:2},r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{autoComplete:"username",variant:"outlined",required:!0,fullWidth:!0,name:"username",value:this.state.username,onChange:this.InputHandle,id:"userName",label:"User Name",autoFocus:!0})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{autoComplete:"fname",variant:"outlined",fullWidth:!0,name:"first_name",value:this.state.first_name,onChange:this.InputHandle,id:"firstName",label:"First Name",autoFocus:!0})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{autoComplete:"lname",variant:"outlined",fullWidth:!0,name:"last_name",value:this.state.last_name,onChange:this.InputHandle,id:"lastName",label:"Last Name",autoFocus:!0})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",required:!0,fullWidth:!0,value:this.state.email,onChange:this.InputHandle,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"outlined",required:!0,fullWidth:!0,value:this.state.password,onChange:this.InputHandle,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(W.a,{component:"div",my:3},r.a.createElement(i.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Register"))),r.a.createElement(L.a,{container:!0,justify:"flex-end"},r.a.createElement(L.a,{item:!0},r.a.createElement(A.a,null,r.a.createElement(H.b,{href:"#login",variant:"body2",className:"alreadyLogin"},"Already have an account? Login")))))))):r.a.createElement(C.a,{to:{pathname:"/login"}})}}]),a}(r.a.Component);U.contextType=S;var B=Object(P.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{backgroundColor:"#3f51b5"},form:{width:"100%"},submit:{}}}))(U),R=a(216),z=function(){return r.a.createElement("div",{className:"errorSection"}," ",r.a.createElement(R.a,{style:{padding:"20px"}},r.a.createElement(A.a,{color:"primary",component:"h1",variant:"h4"},"Error! 404 Not Found")))},q=a(217),G=a(218),J=a(114),V=a.n(J),X=a(115),Y=a.n(X),$=function(){var e=Object(n.useContext)(S),t=e.mobileNav,a=e.CloseNavMenu,l=e.OpenNavMenu,o=e.isOnline,c=e.refreshCache,s=function(){var e=localStorage.getItem("item");return e&&e.length>10}();return r.a.createElement("div",null,r.a.createElement(q.a,{position:"static"},r.a.createElement(G.a,{className:"nav"},r.a.createElement("div",{className:"navLeft"},r.a.createElement(A.a,{edge:"start",className:"logoTitle",variant:"h6"},"Global Fairness Initiative"),r.a.createElement("div",{className:"burgerBar"},t?r.a.createElement(V.a,{onClick:function(){return a()}}):r.a.createElement(Y.a,{onClick:function(){return l()}}))),r.a.createElement("div",{className:t?"navRight hide":"navRight"},r.a.createElement(H.b,{to:"/kilnlist"},r.a.createElement(i.a,{className:"loginButton"},"Kiln")),r.a.createElement(H.b,{to:"/workers"},r.a.createElement(i.a,{className:"loginButton"},"Workers")),r.a.createElement(H.b,{to:"/ngos"},r.a.createElement(i.a,{className:"loginButton"},"Ngos")),r.a.createElement("div",null,s?r.a.createElement("div",null,o()?r.a.createElement("span",null,r.a.createElement(H.b,{to:"/logout"},r.a.createElement(i.a,{onClick:function(){return window.location.reload()},className:"loginButton"},"Logout"))):""):r.a.createElement("span",null,r.a.createElement(H.b,{to:"/login"},r.a.createElement(i.a,{className:"loginButton",variant:"h6"},"Login")))),o()?r.a.createElement(i.a,{onClick:c,variant:"contained"},"Refresh"):null))))},Q=a(71),Z=a.n(Q),ee=a(116),te={Fireman:5650,Moulder:7750,Transporter:7400,Others:5150},ae=function(e){return e?e.extra&&e.extra.payment?e.extra.payment.amount:te[e.category]:0},ne=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={valuea:e.context.ModalData,paymentdat:{amount:ae(e.context.ModalData),timeofpay:"",amountpayer:e.context.user&&e.context.user.username}},e.handleChangeAmount=function(t){var a=t.target.value;e.setState({paymentdat:Object(c.a)(Object(c.a)({},e.state.paymentdat),{},{amount:a})})},e.setUpdatedPayment=function(t){e.context.WorkerEditStatefunc(t)},e.handleSubmit=function(t){t.preventDefault();var a=e.context.ModalData;a.extra||(a.extra={}),a.extra.payment=Object(c.a)(Object(c.a)({},e.state.paymentdat),{},{amountpayer:e.context.user,timeofpay:(new Date).toLocaleString(),pay_id:Object(ee.v4)()});var n=e.context.ModalData.id;navigator.onLine?b({method:"PUT",url:"workers/".concat(n),data:a}).then((function(t){200===t.status&&"OK"===t.statusText&&e.setUpdatedPayment(a),e.context.CloseModal()})).catch((function(t){e.setState({}),e.context.CloseModal()})):(e.setUpdatedPayment(a),e.context.WorkerEditPaymentFunc(a),e.context.CloseModal())},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.context,t=e.CloseModal;e.ModalStatus,e.ModalData,e.user,e.sendModalData;return r.a.createElement("div",{className:"modalOverlay"},r.a.createElement(N.a,{maxWidth:"sm",component:"main"},r.a.createElement("div",{className:"modalInner"},r.a.createElement(Z.a,{className:"CloseModelIcon",onClick:function(){return t()}}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h2",null,"Enter Amount"),r.a.createElement(D.a,{id:"outlined-full-width",label:"Enter Amount",placeholder:"Enter Amount",helperText:"",fullWidth:!0,value:this.state.paymentdat.amount,onChange:this.handleChangeAmount,name:"amount",margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined"}),r.a.createElement(i.a,{style:{marginTop:8},type:"submit",variant:"contained",color:"primary"},"Save Payment")))))}}]),a}(r.a.Component);ne.contextType=S;var re=ne,le=a(219),oe=function(){return r.a.createElement("div",{className:"spinnerSection"},r.a.createElement("div",null,r.a.createElement(le.a,{color:"secondary"})))},ie=a(220),ce=a(221),se=a(30),me=Object(ie.a)({root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:8},buttonMargin:{marginTop:15,marginRight:15}}),ue=function(e){var t=e.worker,a=Object(n.useContext)(S),l=a.deleteWorker,o=a.OpenModal,c=a.isSuperUser,s=a.user,m=a.cancelPayment,u=me(),d=function(e){var t;window.confirm("Are you sure you want to delete the worker?")&&(l(e.id),t="Home",se.scroller.scrollTo(t,{duration:1e3,delay:100,smooth:!0}))};return r.a.createElement(L.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(R.a,{className:u.root},r.a.createElement(ce.a,null,r.a.createElement(A.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.f_name," ",t.l_name),r.a.createElement(A.a,{gutterBottom:!0,variant:"h6"},t.code),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"p"},"Category: ",t.category),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"p"},"Naike: ",t.naike_name),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"p"},"Gender: ",t.gender),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"p"},"Age: ",t.age),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"p"},"District: ",t.district),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"p"},"Municipality: ",t.municipality),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"p"},"Ward: ",t.ward),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"p"},"Phone: ",t.phone),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"p"},"Kiln: ",t.kiln.name),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"p"},r.a.createElement("span",null,"Children :"),t.children?t.children.map((function(e,t){return r.a.createElement("span",{key:t,style:{marginLeft:"10px",borderBottom:"1px solid"}},e.join("/"))})):null),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"div"},r.a.createElement("span",null,"Paid By: "),t.extra&&t.extra.payment?r.a.createElement("div",{style:{display:"inline"}},r.a.createElement("strong",null,t.extra.payment.amountpayer.username)," from",r.a.createElement("strong",null," ",t.extra.payment.amountpayer.ngo.name)," on ",t.extra.payment.timeofpay):"None"),r.a.createElement(A.a,{className:u.pos,variant:"body1",component:"div"},r.a.createElement("span",null,"Paid Amount:  "),t.extra&&t.extra.payment?r.a.createElement(A.a,{variant:"subtitle2",display:"inline"},"Rs.",t.extra.payment.amount," "):"Not Paid"),r.a.createElement("span",null,c()?r.a.createElement("span",null,r.a.createElement(H.b,{to:"/workers/".concat(t.id,"/")},r.a.createElement(i.a,{className:u.buttonMargin,variant:"contained",color:"primary"},"Edit")),r.a.createElement(i.a,{onClick:function(){d(t)},className:u.buttonMargin,variant:"contained",color:"secondary"},"Delete")):null," "),s.ngo?r.a.createElement("span",null,r.a.createElement(i.a,{onClick:function(){return o(t)},variant:"contained",color:"secondary",disabled:t.extra&&t.extra.payment,className:u.buttonMargin},t.extra&&t.extra.payment?"Paid":"Pay")):function(e){return e.extra&&e.extra.payment&&navigator.onLine?r.a.createElement("span",null,r.a.createElement(i.a,{onClick:function(){!function(e){window.confirm("Are you sure you want to cancel the payment? ?")&&m(e)}(e)},variant:"contained",color:"secondary",className:u.buttonMargin},"Cancel Payment")):null}(t))))},de=a(72),pe=a.n(de),fe=function(e){var t=e.title;e.children;return r.a.createElement("div",{className:"title"},r.a.createElement("p",null,t),r.a.createElement("div",null))},he=a(231),ge=a(232),ve=a(215),Ee=a(224),be=Object(ie.a)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)},inputSection:{width:"95%",margin:"auto"}}})),ye=function(){var e=be(),t=Object(n.useContext)(S),a=t.workersInfo,l=t.kname,o=t.gender,i=t.searchbyworkername,c=t.searchbycode,m=t.ChangeOptionFilter,u=t.searchbydistrict,d=t.searchbymunicipality,p=t.searchbyworkercategory,f=t.searchbynaike_f_name,h=t.searchbypaidstatus,g=t.ngos,v=t.searchbyngo,E=function(e,t){return["All"].concat(Object(s.a)(new Set(e.map((function(e){return e[t]})))))},b=function(e,t){return e.map((function(e,t){return r.a.createElement(ge.a,{key:t,value:e},e)}))},y=b(E(a,"category").sort()),k=b(E(g,"name").sort()),I=b(E(a,"district").sort()),w=b(E(a,"municipality").sort()),x=a.map((function(e){return e.kiln.name})),C=[].concat(Object(s.a)(new Set(x)),["All"]).sort().map((function(e,t){return r.a.createElement(ge.a,{key:t,value:e},e)}));return r.a.createElement("div",null,r.a.createElement("div",{className:e.inputSection},r.a.createElement(L.a,{container:!0,spacing:4},r.a.createElement(L.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(D.a,{fullWidth:!0,label:"Search by Name",id:"outlined-size-small",name:"searchbyworkername",value:i,onChange:m,variant:"outlined"})),r.a.createElement(L.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(D.a,{fullWidth:!0,label:"Search by Code",id:"outlined-size-small",name:"searchbycode",value:c,onChange:m,variant:"outlined"})),r.a.createElement(L.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(D.a,{fullWidth:!0,label:"Search by Naike name",id:"outlined-size-normal",name:"searchbynaike_f_name",value:f,onChange:m,variant:"outlined"})),r.a.createElement(L.a,{item:!0,xs:6,sm:6,md:4,className:"categoryMargin"},r.a.createElement(ve.a,{variant:"outlined",className:e.formControl},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"By Category"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"searchbyworkercategory",value:p,onChange:m,label:"Category"},y))),r.a.createElement(L.a,{item:!0,xs:6,sm:4},r.a.createElement(ve.a,{variant:"outlined",className:e.formControl},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"By District"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"searchbydistrict",value:u,onChange:m,label:"Districtname"},I))),r.a.createElement(L.a,{item:!0,xs:6,sm:4},r.a.createElement(ve.a,{variant:"outlined",className:e.formControl},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"By Municipality"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"searchbymunicipality",value:d,onChange:m,label:"Municipalityname"},w))),r.a.createElement(L.a,{item:!0,xs:6,sm:4},r.a.createElement(ve.a,{variant:"outlined",className:e.formControl},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"By Kiln"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"kname",value:l,onChange:m,label:"Kilnname"},C))),r.a.createElement(L.a,{item:!0,xs:6,sm:4},r.a.createElement(ve.a,{variant:"outlined",className:e.formControl},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"By Gender"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"gender",value:o,onChange:m,label:"Gender"},r.a.createElement(ge.a,{value:"All"},"All"),r.a.createElement(ge.a,{value:"Male"},"Male"),r.a.createElement(ge.a,{value:"Female"},"Female"),r.a.createElement(ge.a,{value:"Others"},"Others")))),r.a.createElement(L.a,{item:!0,xs:6,sm:4},r.a.createElement(ve.a,{variant:"outlined",className:e.formControl},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"Paid Status"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"searchbypaidstatus",value:h,onChange:m,label:"Paid Status"},r.a.createElement(ge.a,{value:"All"},"All"),r.a.createElement(ge.a,{value:"paid"},"Paid"),r.a.createElement(ge.a,{value:"unpaid"},"Unpaid")))),r.a.createElement(L.a,{item:!0,xs:6,sm:4},r.a.createElement(ve.a,{variant:"outlined",className:e.formControl},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"Ngo"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"searchbyngo",value:v,onChange:m,label:"Paid Status"},k))))))},ke=a(226),Se=function(e){var t=e.itemsPerPage,a=e.totalItems,n=e.paginate,l=r.a.useState(1),o=Object(u.a)(l,2),i=o[0],c=o[1];return r.a.createElement("div",{className:"paginateClass"},r.a.createElement("div",null,r.a.createElement(ke.a,{count:Math.ceil(a/t),onClick:n(i),page:i,onChange:function(e,t){c(t)},color:"secondary",className:"paginateInner"})),r.a.createElement("div",null))},Ie=a(43),we=a.n(Ie),xe=a(227);function Ce(e){return r.a.createElement(xe.a,Object.assign({elevation:6,variant:"filled"},e))}var Oe=function(e){var t=e.title,a=e.bg;return r.a.createElement(W.a,{mt:3},r.a.createElement(Ce,{severity:a},t))},Ne=Object(ie.a)((function(e){return{pos:{marginTop:15,width:"95%",margin:"auto"},addIcon:{width:"95%",marginTop:30,margin:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",color:"primary"},AddIconLink:{display:"flex",alignItems:"center",textDecoration:"none"}}})),We=function(){var e=Ne(),t=function(){var e=localStorage.getItem("item");return e&&e.length>10}(),a=Object(n.useContext)(S),l=a.sortedWorkersInfo,o=a.isSuperUserSummary,i=a.isSuperUser,c=a.workersInfo,s=a.csvData,m=a.CsvWorkerDataFunc,d=a.supportServiceWorker,p=Object(n.useState)(1),f=Object(u.a)(p,2),h=f[0],g=f[1],v=Object(n.useState)(9),E=Object(u.a)(v,1)[0];if(!l)return r.a.createElement(oe,null);var b=h*E,y=b-E,k=l.slice(y,b).map((function(e){return r.a.createElement(ue,{worker:e,key:e.id})}));return r.a.createElement("div",{className:"workerList-Section"},d()&&navigator.onLine?"":d()&&!navigator.onLine?r.a.createElement(Oe,{bg:"info",title:"You are currently working on offline mode."}):d()?null:r.a.createElement(Oe,{bg:"warning",title:"Sorry,your browser doesn't support offline mode."}),t?r.a.createElement("div",null,i()?r.a.createElement("span",{className:e.addIcon},r.a.createElement(H.b,{to:"/inputnewworker",className:e.AddIconLink},r.a.createElement(pe.a,{color:"primary",fontSize:"large"}),r.a.createElement(A.a,{className:"addnewWorker",color:"primary",component:"h1",variant:"h6"},"Add new worker")),r.a.createElement(H.b,{to:"/summary",className:e.AddIconLink},r.a.createElement(A.a,{className:"addnewWorker",color:"primary",component:"h1",variant:"h6"},"Summary"),r.a.createElement(we.a,{color:"primary",fontSize:"large"}))):o()?r.a.createElement("span",{className:"offlineSummaryLink"},r.a.createElement(H.b,{to:"/summary",className:e.AddIconLink},r.a.createElement(A.a,{className:"addnewWorker",color:"primary",component:"h1",variant:"h6"},"Summary"),r.a.createElement(we.a,{color:"primary",fontSize:"large"}))):"",r.a.createElement(fe,{title:"Workers List"}),r.a.createElement(ye,null),r.a.createElement(W.a,null,r.a.createElement(A.a,{variant:"h5",className:"SelectedWorkers"},"Selected"," ",r.a.createElement("strong",{className:"sortedOutof"},l.length)," ","out of"," ",r.a.createElement("strong",{className:"sortedOutoflength"},c.length)," ","workers")),r.a.createElement("div",{className:e.pos},r.a.createElement(L.a,{container:!0,spacing:2},k)),r.a.createElement("div",{className:"CsvBtnSec"},r.a.createElement(Se,{itemsPerPage:E,totalItems:l.length,paginate:function(e){g(e)},csvData:s,csvFunc:m,csvheader:["Id","First Name","Last Name","Naike Name","NaikePhone","Priority","Ngo","Duplicate","Gender","Age","Country","District","Municipality","Village","Ward","Phone","Category","Kiln Id","Children","Kiln","Kiln Address","Amount Paid","Amount Payer"]}),r.a.createElement("div",{className:"csvbtn"},r.a.createElement(x,null)))):r.a.createElement(C.a,{to:{pathname:"/login"}}))},je=Object(ie.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},formControl:{minWidth:120}}})),Ae=function(e){var t=e.SubmitHandler,a=e.valuea,n=e.InputHandler,l=e.kilnlist,o=e.InputHandlerKiln,c=je(),s=l.map((function(e){return r.a.createElement(ge.a,{key:e.id,value:e.id},e.name,", ",e.address)}));return r.a.createElement(N.a,{maxWidth:"sm",component:"main"},r.a.createElement("div",{className:c.paper},r.a.createElement(fe,{title:"Add Worker"}),r.a.createElement("form",{className:c.form,action:"",onSubmit:t},r.a.createElement(L.a,{container:!0,spacing:2},r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"f_name",value:a.f_name,onChange:n,id:"standard-basic",label:"Enter Firstname",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"l_name",value:a.l_name,onChange:n,id:"standard-basic",label:"Enter Lastname",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"naike_name",value:a.naike_name,onChange:n,id:"standard-basic",label:"Enter Naike name",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",required:!0,fullWidth:!0,margin:"normal",name:"age",value:a.age,onChange:n,id:"standard-basic",label:"Enter Age",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"country",value:a.country,onChange:n,id:"standard-basic",label:"Enter Country",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"district",value:a.district,onChange:n,id:"standard-basic",label:"Enter District",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"municipality",value:a.municipality,onChange:n,id:"standard-basic",label:"Enter Municipality",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"ward",value:a.ward,onChange:n,id:"standard-basic",label:"Enter Ward",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"category",value:a.category,onChange:n,id:"standard-basic",label:"Enter Category",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"phone",value:a.phone,onChange:n,id:"standard-basic",label:"Enter Phone",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{variant:"outlined",required:!0,fullWidth:!0,className:c.formControl},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"Gender"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:a.gender,name:"gender",onChange:n,label:"gender",InputLabelProps:{shrink:!0}},r.a.createElement(ge.a,{value:"MALE"},"Male"),r.a.createElement(ge.a,{value:"FEMALE"},"Female"),r.a.createElement(ge.a,{value:"OTHERS"},"Others")))),r.a.createElement(L.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{variant:"outlined",fullWidth:!0,required:!0,className:c.formControl},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"Kiln Name"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:a.kiln_id,name:"kiln_id",onChange:o,label:"kiln",InputLabelProps:{shrink:!0}},s)))),r.a.createElement(i.a,{onClick:function(){return e="Home",void se.scroller.scrollTo(e,{duration:1e3,delay:100,smooth:!0});var e},className:c.submit,fullWidth:!0,type:"submit",variant:"contained",color:"primary"},"Submit"))))},Le=function(){var e=Object(n.useContext)(S),t=e.workersInfo,a=e.WorkerNewStatefunc,l=e.kilnInfo,o=e.alertData,i=e.AlertFunc,d=e.isSuperUser,p=function(){var e=localStorage.getItem("item");return e&&e.length>10}(),f={f_name:"",l_name:"",naike_name:"",naike_l_name:"",gender:"",age:"",country:"",district:"",municipality:"",ward:"",category:"",phone:"",salary:"",kiln_id:"",extra:null,children:[]},h=Object(n.useState)(f),g=Object(u.a)(h,2),v=g[0],E=g[1],y=Object(n.useState)(t),k=Object(u.a)(y,2),I=k[0],w=k[1],x=Object(n.useState)(o),O=Object(u.a)(x,2),N=O[0],W=O[1];Object(n.useEffect)((function(){a(Object(s.a)(I))}),[I]),Object(n.useEffect)((function(){i(N)}),[N]);return r.a.createElement("div",{className:"workerInputSection"},p&&d()?r.a.createElement("div",null,r.a.createElement(Ae,{kilnlist:l,InputHandlerKiln:function(e){var t=e.target.name,a=e.target.value;E((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(m.a)({},t,a))}))},InputHandler:function(e){var t=e.target.name,a=e.target.value;a=a.toUpperCase(),E((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(m.a)({},t,a))}))},SubmitHandler:function(e){e.preventDefault();var t=I.reduce((function(e,t){return e[t.code]=!0,e}),{});v.code=function(e,t){for(var a="".concat(e.f_name.substr(0,2)).concat(e.l_name.substr(0,2),"-").concat(e.gender[0],"-").concat(e.age).toUpperCase(),n=a,r=1;t[n];)n="".concat(a,"-").concat(r),r++;return n}(v,t),b({method:"POST",url:"workers/",data:v}).then((function(e){v.id=e.data.id,v.kiln=l.find((function(e){return e.id===v.kiln_id})),w([].concat(Object(s.a)(I),[v])),201===e.status&&"Created"===e.statusText&&W({type:"success",msg:"Worker saved"})})).catch((function(e){W({type:"error",msg:"Something went wrong. Please try again."})})),E(f)},valuea:v})):r.a.createElement(C.a,{to:{pathname:"login"}}))},De=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={singleWorkerInfo:{},id:e.props.match.params.id,alertInfo:e.context.alertData},e.scrollToElement=function(e){se.scroller.scrollTo(e,{duration:1e3,delay:100,smooth:!0})},e.InputHandler=function(t){var a=t.target.name,n=t.target.value;n=n.toUpperCase();var r=Object(c.a)(Object(c.a)({},e.state.singleWorkerInfo),{},Object(m.a)({},a,n));e.setState({singleWorkerInfo:r})},e.InputHandlerKiln=function(t){var a=t.target.name,n=t.target.value,r=Object(c.a)(Object(c.a)({},e.state.singleWorkerInfo),{},Object(m.a)({},a,n));e.setState({singleWorkerInfo:r})},e.SubmitHandler=function(t){t.preventDefault(),b({method:"PUT",url:"workers/".concat(e.state.singleWorkerInfo.id),data:e.state.singleWorkerInfo}).then((function(t){200===t.status&&"OK"===t.statusText&&(e.state.singleWorkerInfo.id=t.data.id,e.state.singleWorkerInfo.kiln=e.context.kilnInfo.find((function(t){return t.id===e.state.singleWorkerInfo.kiln_id})),e.context.WorkerEditStatefunc(e.state.singleWorkerInfo),e.setState({alertInfo:{type:"success",msg:"Worker Updated Successfully"}}))})).catch((function(t){e.setState({alertInfo:{type:"error",msg:"Something went wrong. Please try again."}})}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;b({method:"GET",url:"workers/".concat(this.state.id)}).then((function(t){e.setState({singleWorkerInfo:t.data})})).catch((function(e){return console.log(e)}))}},{key:"componentDidUpdate",value:function(e,t){t.alertInfo!==this.state.alertInfo&&this.context.AlertFunc(this.state.alertInfo)}},{key:"render",value:function(){var e=this,t=this.context.kilnInfo.map((function(e){return r.a.createElement(ge.a,{value:e.id},e.name)}));return r.a.createElement(N.a,{maxWidth:"sm",component:"main"},r.a.createElement("div",null,r.a.createElement(fe,{title:"Update Worker"}),r.a.createElement("form",{action:"",onSubmit:this.SubmitHandler},r.a.createElement(L.a,{container:!0,spacing:2},r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"f_name",value:this.state.singleWorkerInfo.f_name,onChange:this.InputHandler,id:"standard-basic",label:"Enter firstname",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"l_name",value:this.state.singleWorkerInfo.l_name,onChange:this.InputHandler,id:"standard-basic",label:"Enter lastname",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"naike_name",value:this.state.singleWorkerInfo.naike_name,onChange:this.InputHandler,id:"standard-basic",label:"Enter naike_name",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"country",value:this.state.singleWorkerInfo.country,onChange:this.InputHandler,id:"standard-basic",label:"Enter country",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",required:!0,fullWidth:!0,margin:"normal",name:"age",value:this.state.singleWorkerInfo.age,onChange:this.InputHandler,id:"standard-basic",label:"Enter age",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"district",value:this.state.singleWorkerInfo.district,onChange:this.InputHandler,id:"standard-basic",label:"Enter district",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"municipality",value:this.state.singleWorkerInfo.municipality,onChange:this.InputHandler,id:"standard-basic",label:"Enter municipality",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"ward",value:this.state.singleWorkerInfo.ward,onChange:this.InputHandler,id:"standard-basic",label:"Enter ward",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",fullWidth:!0,margin:"normal",name:"category",value:this.state.singleWorkerInfo.category,onChange:this.InputHandler,id:"standard-basic",label:"Enter category",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"phone",value:this.state.singleWorkerInfo.phone,onChange:this.InputHandler,id:"standard-basic",label:"Enter phone",InputLabelProps:{shrink:!0}})),r.a.createElement(L.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{variant:"outlined",fullWidth:!0},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"Gender"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:this.state.singleWorkerInfo.gender,name:"gender",onChange:this.InputHandler,label:"gender",InputLabelProps:{shrink:!0}},r.a.createElement(ge.a,{value:"MALE"},"MALE"),r.a.createElement(ge.a,{value:"FEMALE"},"FEMALE"),r.a.createElement(ge.a,{value:"OTHERS"},"OTHERS")))),r.a.createElement(L.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{variant:"outlined",fullWidth:!0},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"Kiln Name"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:this.state.singleWorkerInfo.kiln_id,name:"kiln_id",onChange:this.InputHandlerKiln,label:"kiln",InputLabelProps:{shrink:!0}},t)))),r.a.createElement(i.a,{onClick:function(){return e.scrollToElement("Home")},className:"editWorkerBtn",fullWidth:!0,type:"submit",variant:"contained",color:"primary"},"Submit"))))}}]),a}(n.Component);De.contextType=S;var Pe=De,Te=Object(ie.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1),textAlign:"center"},submit:{margin:e.spacing(3,0,2)}}})),_e=function(e){var t=e.InputHandler,a=e.SubmitHandler,n=e.valuea,l=Te();return r.a.createElement(N.a,{component:"main",maxWidth:"sm"},r.a.createElement("div",{className:l.paper},r.a.createElement(fe,{title:"Add Kiln"}),r.a.createElement("form",{className:l.form,action:"",onSubmit:a},r.a.createElement(L.a,{container:!0,spacing:1},r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"name",value:n.name,onChange:t,id:"standard-basic",label:"Enter Kilnname"})),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"address",value:n.address,onChange:t,id:"standard-basic",label:"Enter Kilnaddress"}))),r.a.createElement(i.a,{onClick:function(){return e="Home",void se.scroller.scrollTo(e,{duration:1e3,delay:100,smooth:!0});var e},className:l.submit,fullWidth:!0,type:"submit",variant:"contained",color:"primary"},"Submit"))))},Me=function(){var e={name:"",address:""},t=Object(n.useContext)(S),a=t.KilnNewStatefunc,l=t.kilnInfo,o=t.alertData,i=t.AlertFunc,d=t.isSuperUser,p=Object(n.useState)(l),f=Object(u.a)(p,2),h=f[0],g=f[1],v=Object(n.useState)(e),E=Object(u.a)(v,2),y=E[0],k=E[1],I=Object(n.useState)(o),w=Object(u.a)(I,2),x=w[0],O=w[1],N=function(){var e=localStorage.getItem("item");return e&&e.length>10}();Object(n.useEffect)((function(){a(Object(s.a)(h))}),[h]),Object(n.useEffect)((function(){i(x)}),[x]);return r.a.createElement("div",null,N&&d()?r.a.createElement("div",null,r.a.createElement(_e,{InputHandler:function(e){var t=e.target.name,a=e.target.value;a=a.toUpperCase(),k((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(m.a)({},t,a))}))},SubmitHandler:function(t){t.preventDefault(),b({method:"POST",url:"kiln/",data:y}).then((function(e){y.id=e.data.id,g([].concat(Object(s.a)(h),[y])),201===e.status&&"Created"===e.statusText&&O({type:"success",msg:"Kiln saved"})})).catch((function(e){O({type:"error",msg:"Something went wrong. Please try again."})})),k(e)},valuea:y})):r.a.createElement(C.a,{to:{pathname:"login"}}))},Fe=Object(ie.a)({root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:8},posBtn:{marginTop:10}}),He=function(e){var t=e.kiln,a=Fe(),l=Object(n.useContext)(S),o=l.deleteKiln,c=l.isSuperUser,s=function(e){var t;window.confirm("Are you sure you want to delete the kiln?")&&(o(e.id),t="Home",se.scroller.scrollTo(t,{duration:1e3,delay:100,smooth:!0}))};return r.a.createElement(L.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(R.a,{className:a.root},r.a.createElement(ce.a,null,r.a.createElement(A.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.name),c()?r.a.createElement(i.a,{onClick:function(){s(t)},className:a.posBtn,variant:"contained",color:"secondary"},"Delete"):null)))},Ke=Object(ie.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},inputSection:{width:"95%",margin:"auto"}}})),Ue=function(){var e=Ke(),t=Object(n.useContext)(S),a=t.searchbykiln,l=t.ChangeOptionFilter;return r.a.createElement("div",null,r.a.createElement("div",{className:e.inputSection},r.a.createElement(L.a,{container:!0,spacing:4},r.a.createElement(L.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{fullWidth:!0,label:"Search by Name",id:"outlined-size-small",name:"searchbykiln",value:a,onChange:l,variant:"outlined"})))))},Be=Object(ie.a)({pos:{marginTop:30,width:"95%",margin:"auto"},addIcon:{width:"95%",marginTop:30,margin:"auto",display:"flex",justifyContent:"space-between",alignItems:"center",color:"primary"},AddIconLink:{display:"flex",alignItems:"center",textDecoration:"none"}}),Re=function(){var e=Be(),t=function(){var e=localStorage.getItem("item");return e&&e.length>10}(),a=Object(n.useContext)(S),l=a.sortedkilnInfo,o=a.isSuperUserSummary,i=a.isSuperUser,c=a.kilnInfo,s=Object(n.useState)(1),m=Object(u.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(9),h=Object(u.a)(f,1)[0];if(!l)return r.a.createElement(oe,null);var g=d*h,v=g-h,E=l.slice(v,g).map((function(e){return r.a.createElement(He,{kiln:e,key:e.id})}));return r.a.createElement("div",{className:"kilnList-Section"},navigator.onLine?"":r.a.createElement(Oe,null),t?r.a.createElement("div",null,i()?r.a.createElement("span",{className:e.addIcon},r.a.createElement(H.b,{to:"/kiln",className:e.AddIconLink},r.a.createElement(pe.a,{color:"primary",fontSize:"large"}),r.a.createElement(A.a,{className:"addnewWorker",color:"primary",component:"h1",variant:"h6"},"Add new kiln")),r.a.createElement(H.b,{to:"/summary",className:e.AddIconLink},r.a.createElement(A.a,{className:"addnewWorker",color:"primary",component:"h1",variant:"h6"},"Summary"),r.a.createElement(we.a,{color:"primary",fontSize:"large"}))):o()?r.a.createElement("span",{className:"offlineSummaryLink"},r.a.createElement(H.b,{to:"/summary",className:e.AddIconLink},r.a.createElement(A.a,{className:"addnewWorker",color:"primary",component:"h1",variant:"h6"},"Summary"),r.a.createElement(we.a,{color:"primary",fontSize:"large"}))):"",r.a.createElement(fe,{title:"Kiln List"}),r.a.createElement(Ue,null),r.a.createElement(W.a,null,r.a.createElement(A.a,{variant:"h5",className:"SelectedWorkers"},"Selected"," ",r.a.createElement("strong",{className:"sortedOutof"},l.length)," ","out of"," ",r.a.createElement("strong",{className:"sortedOutoflength"},c.length)," ","kilns")),r.a.createElement("div",{className:e.pos},r.a.createElement(L.a,{container:!0,spacing:2},E)),r.a.createElement(Se,{itemsPerPage:h,totalItems:l.length,paginate:function(e){p(e)}})):r.a.createElement(C.a,{to:{pathname:"login"}}))},ze=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={ngos:e.context.ngos},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.context.isSuperUserSummary,t=this.state.ngos,a=function(){var e=localStorage.getItem("item");return e&&e.length>10}();if(!t)return r.a.createElement(oe,null);this.context.workersInfo;var n=t.map((function(e){return r.a.createElement(R.a,{key:e.uuid,style:{marginBottom:".5em",padding:"1em"}},r.a.createElement(A.a,{key:e.uuid},e.name),r.a.createElement("div",{style:{marginTop:".5em"}},r.a.createElement("a",{href:"#register?ngo=".concat(e.uuid),className:"registerLink"},"Registration link")))}));return r.a.createElement("div",{className:"ngolist-Section"},navigator.onLine?"":r.a.createElement(Oe,null),e()?r.a.createElement("div",{className:"ngosummaryLink"},r.a.createElement(H.b,{to:"/summary"},r.a.createElement(A.a,{className:"ngosummarytext",color:"primary",component:"h1",variant:"h6"},"Summary")),r.a.createElement(we.a,{color:"primary",fontSize:"large"})):"",a?r.a.createElement("div",{className:"ngoSection"},r.a.createElement(fe,{title:"NgoList"}),r.a.createElement("div",{className:"ngoInnerSection"},n)):r.a.createElement(C.a,{to:{pathname:"/login"}}))}}]),a}(n.Component);ze.contextType=S;var qe=ze,Ge=a(117),Je=a(118);function Ve(){var e=Object(Ge.a)(["\n  width: ",";\n\n  border-radius: 5px;\n  margin: 20px 0;\n  padding: 10px;\n  background-color: aliceblue;\n\n  .pay-bar {\n    background-color: orange;\n    height: 15px;\n    transition: 0.5s ease all;\n    text-align: center;\n    color: white;\n    border-radius: 5px;\n    padding: 3px 0;\n  }\n"]);return Ve=function(){return e},e}var Xe=function(){var e=localStorage.getItem("item");return e&&e.length>10},Ye=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={allworkers:[],summary:"district",ga:{},kpis:{},max_amount:0,total:{amount:0,workers:0}},e.isAlreadyAuthenticated=Xe(),e.getSummaryFunc=function(){var t=e.state.summary,a=e.state.allworkers.filter((function(e){return e.extra&&e.extra.payment})),n=function(e,t){return e.reduce((function(e,a){var n=function(e,t){return"ngo"!==t?e[t]:e.extra.payment.amountpayer.ngo.name}(a,t);return e[n]||(e[n]=[]),e[n].push(a),e}),{})},r=function(e){return e.reduce((function(e,t){return e+parseFloat(t.extra.payment.amount)}),0)},l=n(a,t);e.setState({ga:l,total:{amount:r(a),workers:a.length}});var o={};for(var i in l){var c=n(l[i],"district"==t?"ngo":"district"),m={};for(var u in c)m[u]={name:u,value:r(c[u])};o[i]={name:i,value:r(l[i]),nest:{g:c,nkpis:m}}}e.setState({kpis:o});var d=Math.max.apply(Math,Object(s.a)(Object.values(o).map((function(e){return e.value}))));e.setState({max_amount:d})},e.InputHandler=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(m.a)({},a,n))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({allworkers:this.context.workersInfo},(function(){return e.getSummaryFunc()}))}},{key:"componentDidUpdate",value:function(e,t){t.summary!==this.state.summary&&this.getSummaryFunc()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.isAlreadyAuthenticated&&this.context.isSuperUser()?r.a.createElement("div",{className:"newSummary"},r.a.createElement(fe,{title:"Summary"}),r.a.createElement("div",{className:"mysum"},r.a.createElement(L.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{variant:"outlined",fullWidth:!0,className:"Summarydrop"},r.a.createElement(he.a,{id:"demo-simple-select-outlined-label"},"Summary"),r.a.createElement(Ee.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:this.state.summary,name:"summary",onChange:this.InputHandler,label:"Summamry",InputLabelProps:{shrink:!0}},r.a.createElement(ge.a,{name:"district",value:"district"},"District"),r.a.createElement(ge.a,{name:"ngo",value:"ngo"},"Ngo"))))),r.a.createElement("div",null,r.a.createElement(A.a,{className:"summaryTotalamount",style:{marginTop:"20px"}},"Rs.",this.state.total.amount.toLocaleString("en-hi")," paid to ",r.a.createElement("span",null),this.state.total.workers.toLocaleString("en-hi")," of ",r.a.createElement("span",null),this.state.allworkers.length.toLocaleString("en-hi")," workers")),r.a.createElement("div",{style:{width:"100%"}},Object.entries(this.state.ga).map((function(t,a){var n=Object(u.a)(t,2),l=n[0],o=n[1];return r.a.createElement("div",{key:a},r.a.createElement($e,null,r.a.createElement(W.a,{mb:2},r.a.createElement(A.a,{variant:"h6"},l),r.a.createElement(A.a,null,"Rs.",e.state.kpis[l].value.toLocaleString("en-hi")," ","paid to ",o.length.toLocaleString("en-hi")," ","workers"),r.a.createElement("div",{className:"pay-bar",style:{width:"".concat(e.state.kpis[l].value/e.state.max_amount*100,"%"),marginBottom:".5em"}})),Object.entries(e.state.kpis[l].nest.nkpis).map((function(t,a){var n=Object(u.a)(t,1)[0];return r.a.createElement("div",{key:a},r.a.createElement(W.a,{my:1},r.a.createElement(A.a,null,n),r.a.createElement(A.a,{variant:"body2"},"Rs.",e.state.kpis[l].nest.nkpis[n].value.toLocaleString("en-hi")," ","paid to"," ",e.state.kpis[l].nest.g[n].length.toLocaleString("en-hi")," ","workers"),r.a.createElement("div",{className:"pay-bar",style:{width:"".concat(e.state.kpis[l].nest.nkpis[n].value/e.state.max_amount*100,"%"),height:"10px"}})))}))))})))):r.a.createElement(C.a,{to:{pathname:"/login"}}))}}]),a}(n.Component);Ye.contextType=S;var $e=Je.a.div(Ve(),(function(e){return e.width?e.width:""})),Qe=Ye,Ze=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"loadingscreen"},r.a.createElement("div",null,r.a.createElement("h1",null,"Syncing offline data...")))}}]),a}(n.Component),et=a(223),tt=a(222);var at=function(){var e=Object(n.useContext)(S),t=e.alertData,a=e.isSuperUser,l=e.AlertFunc,o=e.user,i=e.ModalData,c=e.syncing,s=e.isOnline;if(function(){var e=localStorage.getItem("item");return e&&e.length>10}()&&!o)return r.a.createElement(oe,null);var m=t?r.a.createElement(et.a,{in:!0},r.a.createElement(xe.a,{action:r.a.createElement(tt.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){l(null)}},r.a.createElement(Z.a,{fontSize:"inherit"})),severity:t.type},t.msg)):null,u=a()?r.a.createElement(C.b,{exact:!0,path:"/workers/:id/",component:Pe}):null;return r.a.createElement("div",{className:"App"},r.a.createElement(H.a,null,r.a.createElement(se.Element,{name:"Home"},r.a.createElement($,null)),m,r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:"/",component:O}),r.a.createElement(C.b,{exact:!0,path:"/inputnewworker",component:Le}),r.a.createElement(C.b,{exact:!0,path:"/register",component:B}),r.a.createElement(C.b,{exact:!0,path:"/login",component:F}),s()?r.a.createElement(C.b,{exact:!0,path:"/logout",component:K}):null,r.a.createElement(C.b,{exact:!0,path:"/kiln",component:Me}),r.a.createElement(C.b,{exact:!0,path:"/workers",component:We}),r.a.createElement(C.b,{exact:!0,path:"/ngos",component:qe}),r.a.createElement(C.b,{exact:!0,path:"/kilnlist",component:Re}),r.a.createElement(C.b,{exact:!0,path:"/summary",component:Qe}),u,r.a.createElement(C.b,{component:z})),i?r.a.createElement(re,null):null,c?r.a.createElement(Ze,null):null))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null,r.a.createElement(at,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return void console.log("sw wont work");window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");console.log("sw loading"),y?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):k(t,e)}))}}()},56:function(e,t,a){}},[[140,1,2]]]);
//# sourceMappingURL=main.3c41806c.chunk.js.map